---
wrapper_template: "cube/study/_markdown.html"
markdown_includes:
  nav: "cube/study/_navigation.md"
context:
  title: "Software Components"
  description: "Software Components"
  auto_paginate: True
---

We have a lot of information about hardware components. We will
now look at some tools that provide software information, like
the kernel version of a particular driver version.

The `lsb_release` command provides distribution-specific information:

```
$ lsb_release -a
No LSB modules are available.
Distributor ID:	Ubuntu
Description:	Ubuntu 20.04.1 LTS
Release:	20.04
Codename:	focal
```

The `uname` command outputs the kernel version and other system
information:

```
$ uname -a
Linux deploy 5.4.0-54-generic #60-Ubuntu SMP Fri Nov 6 10:37:59 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux
```

The `uname` command comes with many options. If you have to write
a script that checks the kernel version before taking an action,
you can extract just that using the `-r` option:

```
$ uname  -r
5.4.0-54-generic
```

You can obtain driver information with `modinfo`. In Linux, the
drivers are part of the Linux kernel, and they can be listed with
`lsmod`. Here's an example of information for the VirtIO block
device driver:

```
$ modinfo virtio_blk
filename:       /lib/modules/5.4.0-54-generic/kernel/drivers/block/virtio_blk.ko
license:        GPL
description:    Virtio block driver
srcversion:     4229F02E0C62A8CEB0618C3
alias:          virtio:d00000002v*
depends:
retpoline:      Y
intree:         Y
name:           virtio_blk
vermagic:       5.4.0-54-generic SMP mod_unload 
sig_id:         PKCS#7
signer:         Build time autogenerated kernel key
sig_key:        47:AF:FC:F1:86:66:29:ED:36:CF:32:E5:45:0F:C1:C8:85:38:3E:AF
sig_hashalgo:   sha512
signature:      3E:DE:3E:EA:A7:A7:AB:7B:32:FC:F9:F0:5B:8F:3F:32:7B:56:C2:89:
...
parm:           queue_depth:uint
```

You can obtain information about file systems from the **/proc/mounts**
file using the `df` command with the `-T` option, or by using the
`findmnt` command.

```
$ cat /proc/mounts
sysfs /sys sysfs rw,nosuid,nodev,noexec,relatime 0 0
proc /proc proc rw,nosuid,nodev,noexec,relatime 0 0
udev /dev devtmpfs rw,nosuid,noexec,relatime,size=8181764k,nr_inodes=2045441,mode=755 0 0
devpts /dev/pts devpts rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000 0 0
tmpfs /run tmpfs rw,nosuid,nodev,noexec,relatime,size=1639800k,mode=755 0 0
/dev/vda1 / ext4 rw,relatime 0 0
securityfs /sys/kernel/security securityfs rw,nosuid,nodev,noexec,relatime 0 0
tmpfs /dev/shm tmpfs rw,nosuid,nodev 0 0
tmpfs /run/lock tmpfs rw,nosuid,nodev,noexec,relatime,size=5120k 0 0
tmpfs /sys/fs/cgroup tmpfs ro,nosuid,nodev,noexec,mode=755 0 0
cgroup2 /sys/fs/cgroup/unified cgroup2 rw,nosuid,nodev,noexec,relatime 0 0
cgroup /sys/fs/cgroup/systemd cgroup rw,nosuid,nodev,noexec,relatime,xattr,name=systemd 0 0
pstore /sys/fs/pstore pstore rw,nosuid,nodev,noexec,relatime 0 0
none /sys/fs/bpf bpf rw,nosuid,nodev,noexec,relatime,mode=700 0 0
cgroup /sys/fs/cgroup/cpu,cpuacct cgroup rw,nosuid,nodev,noexec,relatime,cpu,cpuacct 0 0
cgroup /sys/fs/cgroup/memory cgroup rw,nosuid,nodev,noexec,relatime,memory 0 0
cgroup /sys/fs/cgroup/rdma cgroup rw,nosuid,nodev,noexec,relatime,rdma 0 0
cgroup /sys/fs/cgroup/net_cls,net_prio cgroup rw,nosuid,nodev,noexec,relatime,net_cls,net_prio 0 0
cgroup /sys/fs/cgroup/freezer cgroup rw,nosuid,nodev,noexec,relatime,freezer 0 0
cgroup /sys/fs/cgroup/devices cgroup rw,nosuid,nodev,noexec,relatime,devices 0 0
cgroup /sys/fs/cgroup/cpuset cgroup rw,nosuid,nodev,noexec,relatime,cpuset,clone_children 0 0
cgroup /sys/fs/cgroup/blkio cgroup rw,nosuid,nodev,noexec,relatime,blkio 0 0
cgroup /sys/fs/cgroup/hugetlb cgroup rw,nosuid,nodev,noexec,relatime,hugetlb 0 0
cgroup /sys/fs/cgroup/perf_event cgroup rw,nosuid,nodev,noexec,relatime,perf_event 0 0
cgroup /sys/fs/cgroup/pids cgroup rw,nosuid,nodev,noexec,relatime,pids 0 0
systemd-1 /proc/sys/fs/binfmt_misc autofs rw,relatime,fd=28,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=13692 0 0
mqueue /dev/mqueue mqueue rw,nosuid,nodev,noexec,relatime 0 0
hugetlbfs /dev/hugepages hugetlbfs rw,relatime,pagesize=2M 0 0
debugfs /sys/kernel/debug debugfs rw,nosuid,nodev,noexec,relatime 0 0
tracefs /sys/kernel/tracing tracefs rw,nosuid,nodev,noexec,relatime 0 0
fusectl /sys/fs/fuse/connections fusectl rw,nosuid,nodev,noexec,relatime 0 0
configfs /sys/kernel/config configfs rw,nosuid,nodev,noexec,relatime 0 0
/dev/vda15 /boot/efi vfat rw,relatime,fmask=0022,dmask=0022,codepage=437,iocharset=iso8859-1,shortname=mixed,errors=remount-ro 0 0
/dev/loop2 /snap/lxd/14804 squashfs ro,nodev,relatime 0 0
/dev/loop0 /snap/core18/1705 squashfs ro,nodev,relatime 0 0
/dev/loop1 /snap/snapd/7264 squashfs ro,nodev,relatime 0 0
tmpfs /run/snapd/ns tmpfs rw,nosuid,nodev,noexec,relatime,size=1639800k,mode=755 0 0
tmpfs /run/user/1000 tmpfs rw,nosuid,nodev,relatime,size=1639796k,mode=700,uid=1000,gid=1000 0 0
tmpfs /var/snap/lxd/common/ns tmpfs rw,relatime,size=1024k,mode=700 0 0
nsfs /var/snap/lxd/common/ns/shmounts nsfs rw 0 0
binfmt_misc /proc/sys/fs/binfmt_misc binfmt_misc rw,nosuid,nodev,noexec,relatime 0 0
/dev/loop4 /snap/snapd/9721 squashfs ro,nodev,relatime 0 0
/dev/loop5 /snap/core18/1932 squashfs ro,nodev,relatime 0 0
/dev/loop6 /snap/lxd/18324 squashfs ro,nodev,relatime 0 0
nsfs /run/snapd/ns/lxd.mnt nsfs rw 0 0
nsfs /var/snap/lxd/common/ns/mntns nsfs rw 0 0
tracefs /sys/kernel/debug/tracing tracefs rw,nosuid,nodev,noexec,relatime 0 0
```

```
$ df -T
Filesystem     Type     1K-blocks    Used Available Use% Mounted on
udev           devtmpfs   8181764       0   8181764   0% /dev
tmpfs          tmpfs      1639800    1172   1638628   1% /run
/dev/vda1      ext4      50633164 8371648  42245132  17% /
tmpfs          tmpfs      8198992       0   8198992   0% /dev/shm
tmpfs          tmpfs         5120       0      5120   0% /run/lock
tmpfs          tmpfs      8198992       0   8198992   0% /sys/fs/cgroup
/dev/vda15     vfat        106858    9344     97514   9% /boot/efi
/dev/loop2     squashfs     70656   70656         0 100% /snap/lxd/14804
/dev/loop0     squashfs     56320   56320         0 100% /snap/core18/1705
/dev/loop1     squashfs     27776   27776         0 100% /snap/snapd/7264
tmpfs          tmpfs      1639796       0   1639796   0% /run/user/1000
tmpfs          tmpfs         1024       0      1024   0% /var/snap/lxd/common/ns
/dev/loop4     squashfs     31744   31744         0 100% /snap/snapd/9721
/dev/loop5     squashfs     56704   56704         0 100% /snap/core18/1932
/dev/loop6     squashfs     71040   71040         0 100% /snap/lxd/18324
ubuntu@deploy:~$ 
```

```
$ findmnt
TARGET                                SOURCE           FSTYPE   OPTIONS
/                                     /dev/vda1        ext4     rw,relatime
|-/sys                                sysfs            sysfs    rw,nosuid,nodev,noexec,relatime
| |-/sys/kernel/security              securityfs       security rw,nosuid,nodev,noexec,relatime
| |-/sys/fs/cgroup                    tmpfs            tmpfs    ro,nosuid,nodev,noexec,mode=755
| | |-/sys/fs/cgroup/unified          cgroup2          cgroup2  rw,nosuid,nodev,noexec,relatime
| | |-/sys/fs/cgroup/systemd          cgroup           cgroup   rw,nosuid,nodev,noexec,relatime,x
| | |-/sys/fs/cgroup/cpu,cpuacct      cgroup           cgroup   rw,nosuid,nodev,noexec,relatime,c
| | |-/sys/fs/cgroup/memory           cgroup           cgroup   rw,nosuid,nodev,noexec,relatime,m
| | |-/sys/fs/cgroup/rdma             cgroup           cgroup   rw,nosuid,nodev,noexec,relatime,r
| | |-/sys/fs/cgroup/net_cls,net_prio cgroup           cgroup   rw,nosuid,nodev,noexec,relatime,n
| | |-/sys/fs/cgroup/freezer          cgroup           cgroup   rw,nosuid,nodev,noexec,relatime,f
| | |-/sys/fs/cgroup/devices          cgroup           cgroup   rw,nosuid,nodev,noexec,relatime,d
| | |-/sys/fs/cgroup/cpuset           cgroup           cgroup   rw,nosuid,nodev,noexec,relatime,c
| | |-/sys/fs/cgroup/blkio            cgroup           cgroup   rw,nosuid,nodev,noexec,relatime,b
| | |-/sys/fs/cgroup/hugetlb          cgroup           cgroup   rw,nosuid,nodev,noexec,relatime,h
| | |-/sys/fs/cgroup/perf_event       cgroup           cgroup   rw,nosuid,nodev,noexec,relatime,p
| | `-/sys/fs/cgroup/pids             cgroup           cgroup   rw,nosuid,nodev,noexec,relatime,p
| |-/sys/fs/pstore                    pstore           pstore   rw,nosuid,nodev,noexec,relatime
| |-/sys/fs/bpf                       none             bpf      rw,nosuid,nodev,noexec,relatime,m
| |-/sys/kernel/debug                 debugfs          debugfs  rw,nosuid,nodev,noexec,relatime
| | `-/sys/kernel/debug/tracing       tracefs          tracefs  rw,nosuid,nodev,noexec,relatime
| |-/sys/kernel/tracing               tracefs          tracefs  rw,nosuid,nodev,noexec,relatime
| |-/sys/fs/fuse/connections          fusectl          fusectl  rw,nosuid,nodev,noexec,relatime
| `-/sys/kernel/config                configfs         configfs rw,nosuid,nodev,noexec,relatime
|-/proc                               proc             proc     rw,nosuid,nodev,noexec,relatime
| `-/proc/sys/fs/binfmt_misc          systemd-1        autofs   rw,relatime,fd=28,pgrp=1,timeout=
|   `-/proc/sys/fs/binfmt_misc        binfmt_misc      binfmt_m rw,nosuid,nodev,noexec,relatime
|-/dev                                udev             devtmpfs rw,nosuid,noexec,relatime,size=81
| |-/dev/pts                          devpts           devpts   rw,nosuid,noexec,relatime,gid=5,m
| |-/dev/shm                          tmpfs            tmpfs    rw,nosuid,nodev
| |-/dev/mqueue                       mqueue           mqueue   rw,nosuid,nodev,noexec,relatime
| `-/dev/hugepages                    hugetlbfs        hugetlbf rw,relatime,pagesize=2M
|-/run                                tmpfs            tmpfs    rw,nosuid,nodev,noexec,relatime,s
| |-/run/lock                         tmpfs            tmpfs    rw,nosuid,nodev,noexec,relatime,s
| |-/run/user/1000                    tmpfs            tmpfs    rw,nosuid,nodev,relatime,size=163
| `-/run/snapd/ns                     tmpfs[/snapd/ns] tmpfs    rw,nosuid,nodev,noexec,relatime,s
|   `-/run/snapd/ns/lxd.mnt           nsfs[mnt:[4026532280]]
|                                                      nsfs     rw
|-/boot/efi                           /dev/vda15       vfat     rw,relatime,fmask=0022,dmask=0022
|-/snap/lxd/14804                     /dev/loop2       squashfs ro,nodev,relatime
|-/snap/core18/1705                   /dev/loop0       squashfs ro,nodev,relatime
|-/snap/snapd/7264                    /dev/loop1       squashfs ro,nodev,relatime
|-/snap/snapd/9721                    /dev/loop4       squashfs ro,nodev,relatime
|-/snap/core18/1932                   /dev/loop5       squashfs ro,nodev,relatime
|-/snap/lxd/18324                     /dev/loop6       squashfs ro,nodev,relatime
`-/var/snap/lxd/common/ns             tmpfs            tmpfs    rw,relatime,size=1024k,mode=700
  |-/var/snap/lxd/common/ns/mntns     nsfs[mnt:[4026532280]]
  |                                                    nsfs     rw
  `-/var/snap/lxd/common/ns/shmounts  nsfs[mnt:[4026532249]]
                                                       nsfs     rw
```

In the last two sections, we listed commands that provide all kinds of
hardware and system information. Suppose you need assistance with
a problem, and you need to share information about your system.
Instead of manually collecting printouts with the commands mentioned
here, you should use the `sosreport` tool.
`sosreport` collects system information, package diagnostics, and other
support data.

You can simply run `sos report` and the tool will create an xzipped
tarball containing critical system information:

```
$ sudo sos report
sosreport (version 4.0)
This command will collect system configuration and diagnostic
information from this Ubuntu system.
For more information on Canonical visit:
  https://www.ubuntu.com/
The generated archive may contain data considered sensitive and its
content should be reviewed by the originating organization before being
passed to any third party.
No changes will be made to system configuration.
Press ENTER to continue, or CTRL-C to quit.
Please enter the case id that you are generating this report for []: 3-1662803
 Setting up archive ...
 Setting up plugins ...
[plugin:networking] skipped command 'ip -s macsec show': required kmods missing: macsec.  Use '--allow-system-changes' to enable collection.
[plugin:networking] skipped command 'ss -peaonmi': required kmods missing: netlink_diag, inet_diag, tcp_diag, af_packet_diag, udp_diag.  Use '--allow-system-changes' to enable collection.
 Running plugins. Please wait ...
  Finishing plugins              [Running: systemd]
  Finished running plugins
Creating compressed archive...
Your sosreport has been generated and saved in:
 /tmp/sosreport-deploy-1234567-2020-11-20-rqeyqfw.tar.xz
 Size	3.41MiB
 Owner	root
 md5	ab7e131f3d5524fc35a47d7bc56f6a9b
Please send this file to your support representative.
```

Here we can see what kind of information the tool collects:

```
$ ls  /tmp/tmp/sosreport-deploy-1234567-2020-11-20-rqeyqfw
boot         etc              ip_addr      lsof   pstree        sys     version.txt
date         free             last         lspci  run           uname   vgdisplay
df           hostname         lib          mount  sos_commands  uptime
dmidecode    installed-debs   lsb-release  proc   sos_logs      usr
environment  installed-snaps  lsmod        ps     sos_reports   var
```
